<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>RIM AI</title><link rel="icon" href="Src\Assets\image.png" type="image/icon type">
    <link rel="stylesheet" href="style.css">
    <link href="https://cdnjs.cloudflare.com/ajax/libs/font-awesome/6.0.0-beta3/css/all.min.css" rel="stylesheet">
</head>
<body>
    <div id="container">
        <aside id="sidebar">
            <img src="logo.png" style="height:10%;border-radius: 15%;"> <h2>Menu</h2>
            <ul>
                <li><a href="javascript:void(0)" onclick="goBackToHome()"><i class="fas fa-home"></i> Home</a></li>
                <li><a href="javascript:void(0)" onclick="showNotifications()"><i class="fas fa-bell"></i> Notifications</a></li>
                <li><a href="javascript:void(0)" onclick="showOrganizations()"><i class="fas fa-hands-helping"></i> Organizations</a></li>
                <li><a href="javascript:void(0)" onclick="showSupport()"><i class="fas fa-users"></i> Support Others</a></li>
                <li><a href="javascript:void(0)" onclick="connectGadgets()"><i class="fas fa-plug"></i> Connect Gadgets</a></li></ul>
        </aside>

        <main id="main-content">
            <!-- Form Popup -->
            <section id="form-popup" style="display: block;">
                <form id="user-form">
                    <h2>Enter Your Information</h2>
                    <label for="name">Name:</label>
                    <input type="text" id="name" name="name" required><br><br>
                    
                    <label for="age">Age:</label>
                    <input type="number" id="age" name="age" required><br><br>
                    
                    <label for="profession">Profession:</label>
                    <input type="text" id="profession" name="profession" required><br><br>
                    
                    <label for="bother">What's bothering you?</label>
                    <textarea id="bother" name="bother" rows="4" required></textarea><br><br>
                    
                    <button type="button" onclick="storeData()">Submit</button>
                </form>
            </section>

            <!-- Home Page (after form submission) -->
            <section id="home-page" style="display: none;">
                <header>
                    <h1>Welcome to Mental Health Support</h1>
                    <p>Your well-being matters, <span id="user-name"></span>, and we're here to listen and help.</p>
                    <p>Conversation is just one part; real help comes through collective assistance.</p>
                </header>

                <!-- Chat Section -->
                <section id="chat-container">
                    <div id="chat-box"></div>
                    <input type="text" id="user-input" placeholder="How are you feeling today?" autofocus>
                    <button onclick="sendMessage()">Send</button>
                </section>
            </section>

            <!-- Support Others -->
            <section id="support-others" style="display: none;">
                <header>
                    <h1>How You Can Support Others</h1>
                    <p>Supporting others can make a huge difference in their lives. Here are some ways you can help:</p>
                </header>
                <!-- Add support group boxes here -->
            </section>

            <!-- Organizations -->
            <section id="organizations-page" style="display: none;">
                <header>
                    <h1>Organizations</h1>
                    <p>Here are some organizations that could help you.</p>
                </header>
                <!-- Add organization details here -->
            </section>

            <!-- Notifications -->
            <section id="notifications-page" style="display: none;">
                <header>
                    <h1>Notifications</h1>
                    <p>You have no new notifications.</p>
                </header>
            </section>
        </main>
    </div>

    <script src="https://js.puter.com/v2/"></script>
    <script>
        // User data placeholder
        let userData = {};

        function storeData() {
            const name = document.getElementById('name').value;
            const age = document.getElementById('age').value;
            const profession = document.getElementById('profession').value;
            const bother = document.getElementById('bother').value;
            
            userData = { name, age, profession, bother };
            console.log(userData); 
            document.getElementById('form-popup').style.display = 'none';
            document.getElementById('home-page').style.display = 'block';
 
            document.getElementById('user-name').textContent = name;
        }

        // Send message function for the chat
        async function sendMessage() {
            const userMessage = document.getElementById('user-input').value;
            if (userMessage.trim() === '') return;

            const chatBox = document.getElementById('chat-box');
            chatBox.innerHTML += `<p><b>You:</b> ${userMessage}</p>`;
            document.getElementById('user-input').value = '';

            // Call to Neko API
            const res = await fetch("https://calmgate.onrender.com/api/chat", {
                method: "POST",
                headers: { "Content-Type": "application/json" },
                body: JSON.stringify({ message: userMessage })
            });

            const data = await res.json();
            chatBox.innerHTML += `<p><b>Neko:</b> ${data.reply}</p>`;
            chatBox.scrollTop = chatBox.scrollHeight;
        }

        // Display different pages
        function showSupport() {
            hideAllPages();
            document.getElementById('support-others').style.display = 'block';
        }

        function showOrganizations() {
            hideAllPages();
            document.getElementById('organizations-page').style.display = 'block';
        }

        function showNotifications() {
            hideAllPages();
            document.getElementById('notifications-page').style.display = 'block';
        }

        function goBackToHome() {
            hideAllPages();
            document.getElementById('home-page').style.display = 'block';
        }

        function hideAllPages() {
            document.getElementById('home-page').style.display = 'none';
            document.getElementById('support-others').style.display = 'none';
            document.getElementById('organizations-page').style.display = 'none';
            document.getElementById('notifications-page').style.display = 'none';
        }

        // Notification reminder every 60 seconds
        function timedNotification() {
            setInterval(() => {
                alert("Reminder: Take a moment for your well-being!");
            }, 60000);
        }

        window.onload = function() {
            timedNotification();
        };
    </script>
</body>
</html>
